---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/name: invidious
    app.kubernetes.io/version: 2025.12.22-9603f51
  name: invidious
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: invidious
  template:
    metadata:
      labels:
        app.kubernetes.io/name: invidious
        app.kubernetes.io/version: 2025.12.22-9603f51
    spec:
      containers:
      - image: quay.io/invidious/invidious:2025.12.22-9603f51
        name: invidious
        ports:
        - containerPort: 3000
          name: invidious
        env:
        - name: INVIDIOUS_CONFIG
          value: |-
            
            db:
              dbname: 1234
              user: test
              password: test
              host: test.svc.cluster.local
              port: 5432
            check_tables: true
            hmac_key: 1234567890123456
            channel_threads: 4
            feed_threads: 4
            pool_size: 2000
            captcha_enabled: false
            disable_proxy: false
            default_user_preferences:
            local: true
            quality: dash
            quality_dash: auto
            											
      - image: quay.io/invidious/invidious-companion:latest
        name: invidious-companion
        volumeMounts:
        - mountPath: /var/tmp/youtubei.js
          name: cache-pvc-volume
      volumes:
      - name: cache-pvc-volume
        persistentVolumeClaim:
          claimName: cache-pvc
