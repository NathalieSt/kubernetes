apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: homepage
  namespace: homepage
spec:
  releaseName: homepage
  chart:
    spec:
      chart: homepage
      sourceRef:
        kind: HelmRepository
        name: homepage
  interval: 50m
  install:
    remediation:
      retries: 3
  values:
    image:
      repository: ghcr.io/gethomepage/homepage
      tag: latest
    config:
      headerStyle: boxed
      layout:
        Useful Bookmarks:
          - Github:
              - abbr: GH
                href: https://github.com/
        Cluster Status:
          # show the kubernetes widget, with the cluster summary and individual nodes
          - kubernetes:
              cluster:
                show: true
                cpu: true
                memory: true
                showLabel: true
                label: "cluster"
              nodes:
                show: true
                cpu: true
                memory: true
                showLabel: true
          - search:
              provider: duckduckgo
              target: _blank
        kubernetes:
          mode: cluster
        settings:
        Applications in the Cluster:
          - homepage:

    # The service account is necessary to allow discovery of other services
    serviceAccount:
      create: true
      name: homepage

    # This enables the service account to access the necessary resources
    enableRbac: true
