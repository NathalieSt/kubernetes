---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: localai
spec:
  interval: 24h
  chartRef:
    kind: HelmChart
    name: localai-chart
  timeout: 10m
  releaseName: localai
  install:
    remediation:
      retries: 3
  values:
    deployment:
      image:
        repository: quay.io/go-skynet/local-ai
        tag: v3.9.0-aio-gpu-intel
    nodeSelector:
      kubernetes.io/hostname: debian
    persistence:
      models:
        accessModes:
        - ReadWriteMany
        enabled: true
        size: 100Gi
        storageClass: nfs-remote
      output:
        accessModes:
        - ReadWriteMany
        enabled: true
        size: 20Gi
        storageClass: nfs-local-v2
    resources:
      limits:
        gpu.intel.com/i915: "1"
