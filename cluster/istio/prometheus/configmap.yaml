apiVersion: v1
data:
  prometheus.yml: "\n            global:\n                scrape_interval: 30s\n                evaluation_interval: 30s\n            scrape_configs:\n            - job_name: 'istiod'\n            kubernetes_sd_configs:\n            - role: endpoints\n                namespaces:\n                names:\n                - istio-system\n            relabel_configs:\n            - source_labels: [__meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]\n                action: keep\n                regex: istiod;http-monitoring\n            scheme: https\n            tls_config:\n                ca_file: /etc/prom-certs/root-cert.pem\n                cert_file: /etc/prom-certs/cert-chain.pem\n                key_file: /etc/prom-certs/key.pem\n                insecure_skip_verify: true\n\n            - job_name: 'envoy-stats'\n            metrics_path: /stats/prometheus\n            kubernetes_sd_configs:\n            - role: pod\n\n            relabel_configs:\n            - source_labels: [__meta_kubernetes_pod_container_port_name]\n                action: keep\n                regex: '.*-envoy-prom'\n            scheme: https\n            tls_config:\n                ca_file: /etc/prom-certs/root-cert.pem\n                cert_file: /etc/prom-certs/cert-chain.pem\n                key_file: /etc/prom-certs/key.pem\n                insecure_skip_verify: true\n        "
kind: ConfigMap
metadata:
  annotations:
    app.kubernetes.io/name: prometheus
    app.kubernetes.io/version: v3.5.0
  name: prometheus-configmap
