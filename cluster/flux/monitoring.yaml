apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: kiali
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: kiali-operator
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/monitoring/kiali'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn:
  - name: prometheus

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: victoria-metrics
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: victoria-metrics
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/monitoring/victoria-metrics'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: perses
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: perses
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/monitoring/perses'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn:
  - name: victoria-metrics
