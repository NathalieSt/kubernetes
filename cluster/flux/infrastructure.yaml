apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: vault
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: vault
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/vault'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: vault-secrets-operator
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: vault-secrets-operator
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/vault-secrets-operator'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn:
  - name: vault

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: reflector
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: reflector
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/reflector'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn:
  - name: vault-secrets-operator

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: postgres
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: postgres
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/postgres'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn:
  - name: reflector

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: gluetun-proxy
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: gluetun-proxy
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/gluetun-proxy'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: valkey
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: valkey
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/valkey'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: redis
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: redis
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/redis'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: caddy
  namespace: flux-system
spec:
  interval: '24h'
  targetNamespace: caddy
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: './cluster/infrastructure/caddy'
  prune: true
  wait: true
  timeout: '10m'
  dependsOn: []
