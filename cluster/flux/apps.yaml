apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: jellyfin
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: jellyfin
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/jellyfin"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: forgejo
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: forgejo
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/forgejo"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: dawarich
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: dawarich
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/dawarich"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn:
    - name: reflector
    - name: redis
    - name: postgres

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: searxng
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: searxng
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/searxng"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn:
    - name: valkey

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: mealie
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: mealie
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/mealie"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn:
    - name: reflector
    - name: postgres

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: glance
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: glance
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/glance"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: booklore
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: booklore
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/booklore"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn: []

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: synapse
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: synapse
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/matrix/synapse"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn:
    - name: matrix-pg

---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: discord-bridge
  namespace: flux-system
spec:
  interval: "24h"
  targetNamespace: discord-bridge
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: "./cluster/apps/matrix/discord-bridge"
  prune: true
  wait: true
  timeout: "10m"
  dependsOn:
    - name: matrix-pg
    - name: synapse
