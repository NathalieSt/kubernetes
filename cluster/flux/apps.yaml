---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: adguard-home
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: adguard-home
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/adguard-home
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: csi-driver-nfs
    - name: reflector
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: affine
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: affine
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/affine
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: csi-driver-nfs
    - name: reflector
    - name: affine-pg
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: booklore
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: booklore
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/booklore
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: csi-driver-nfs
    - name: keda
    - name: mariadb
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: discord-bridge
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: discord-bridge
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/matrix/discord-bridge
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: matrix-pg
    - name: synapse
    - name: csi-driver-nfs
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: flood
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: jellyfin
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/mediaserver/flood
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: jellyfin
    - name: transmission
    - name: csi-driver-nfs
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: forgejo
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: forgejo
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/forgejo
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: forgejo-pg
    - name: valkey
    - name: keda
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: glance
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: glance
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/glance
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: keda
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: jellyfin
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: jellyfin
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/mediaserver/jellyfin
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: csi-driver-nfs
    - name: keda
    - name: intel-device-gpu-plugin
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: localai
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: localai
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/localai
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: csi-driver-nfs
    - name: keda
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: mealie
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: mealie
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/mealie
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: main-pg
    - name: csi-driver-nfs
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: redlib
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: redlib
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/redlib
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: keda
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: stash
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: stash
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/stash
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: keda
    - name: csi-driver-nfs
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: synapse
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: synapse
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/matrix/synapse
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: matrix-pg
    - name: csi-driver-nfs
---
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: transmission
  namespace: flux-system
spec:
  interval: 24h
  targetNamespace: jellyfin
  sourceRef:
    kind: GitRepository
    name: flux-system
  path: ./cluster/apps/mediaserver/transmission
  prune: true
  wait: true
  timeout: 10m
  dependsOn:
    - name: jellyfin
    - name: csi-driver-nfs
