apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: nginx-secret
spec:
  vaultAuthRef: vault-auth
  mount: kvv2
  type: kv-v2
  path: nginx
  refreshAfter: '10s'
  destination:
    create: true
    name: nginx-secret
    labels: {}
    annotations: {}
    transformation:
      templates:
        htpasswd:
          text: "\n                        {{- $user := get .Secrets \"user\" -}}\n                        {{- $password := get .Secrets \"password\" -}}\n                        {{- printf \"%s:%s\" $user $password -}}              \n                        "
