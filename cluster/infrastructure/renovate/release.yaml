apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: renovate
  namespace: renovate
spec:
  interval: 5m  # Reconciliation interval
  chart:
    spec:
      chart: renovate
      version: "39.263.1"
      sourceRef:
        kind: HelmRepository
        name: renovate
  values:
    renovate:
      config: |
          {
            "platform": "gitea",
            "endpoint": "https://codeberg.org",
            "autodiscover": false,
            "dryRun": true,
            "printConfig": true,
            "token": "$RENOVATE_TOKEN",
            "repositories": ["NathalieStiefsohn/kubernetes"]
          }
    existingSecret: renovate-secrets
    cronjob:
      schedule: "0 * * * *"  # Runs at the start of every hour
    env:
      LOG_LEVEL: "debug"