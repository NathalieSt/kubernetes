apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: renovate
  namespace: renovate
spec:
  interval: 5m  # Reconciliation interval
  chart:
    spec:
      chart: renovate
      version: "39.263.1"
      sourceRef:
        kind: HelmRepository
        name: renovate
  values:
    renovate:
      existingConfigFile: /usr/src/app/config.js  # Path in Renovate's container
    config:
      configMap: renovate-config  # Name of the ConfigMap
      key: config.js  # Must match the key in ConfigMap
    cronjob:
      schedule: "0 * * * *"  # Runs at the start of every hour