{
  "extends": [
    "config:base"
  ],
  "packageRules": [
    {
      "matchPaths": ["flux-system/"],
      "enabled": false
    }
  ],
  "regexManagers": [
    {
      "description": "Update nfs-subdir-external-provisioner chart in HelmRelease files",
      "fileMatch": [
        "^cluster/infrastructure/nfs-subdir-external-provisioner/.*release\\.yaml$"
      ],
      "matchStrings": [
        "chart:\\s*nfs-subdir-external-provisioner\\s+version:\\s*[\"'](?<currentValue>[^\"']+)[\"']"
      ],
      "datasourceTemplate": "helm",
      "depNameTemplate": "nfs-subdir-external-provisioner"
    },
    {
      "description": "Update jellyfin chart in HelmRelease files",
      "fileMatch": [
        "^cluster/apps/jellyfin/.*release\\.yaml$"
      ],
      "matchStrings": [
        "chart:\\s*jellyfin\\s+version:\\s*[\"'](?<currentValue>[^\"']+)[\"']"
      ],
      "datasourceTemplate": "helm",
      "depNameTemplate": "jellyfin"
    },
    {
      "description": "Update Docker image tags in Kubernetes manifests",
      "fileMatch": [
        "^cluster/.*\\.yaml$"
      ],
      "matchStrings": [
        "image:\\s*(?<depName>[^:\\s]+)(?::(?<currentValue>[^\\s]+))?"
      ],
      "datasourceTemplate": "docker"
    }
  ]
}